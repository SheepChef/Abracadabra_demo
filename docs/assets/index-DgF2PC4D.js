import{r as e,o as t,a as n,c as l,b as i,d as o,e as a,f as r,n as d,w as u,g as c,h as s,i as m,j as g,t as y,k as p,l as f,F as h,m as v,p as I,q as x,s as B}from"./deps-DCmYKfd3.js";import{A as C}from"./abracadabra-cn-BxELqaAI.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const E=["id"],T=[o("div",{class:"ImScrollBarThumb"},null,-1)],k={__name:"ImScrollBar",props:{ContainerId:String,ContentContainerId:String,Direction:String,Length:String,Width:String,PBottom:String,PRight:String,PMarginOne:String,PMarginTwo:String,Id:String},setup(o){const a=o;var r=e(!1),d=e(!1),u=e(!1);function c(e){r.value?document.getElementById(a.Id).style.opacity="0":"mouseover"==e.type||u.value?(document.getElementById(a.Id).style.opacity="0.701",d.value=!0):"mouseout"!=e.type&&u.value||(document.getElementById(a.Id).style.opacity="0.4",setTimeout((function(){"0.701"!=document.getElementById(a.Id).style.opacity&&(document.getElementById(a.Id).style.opacity="0",d.value=!1)}),1e3))}return t((()=>{})),n((()=>{var t=document.getElementById(a.Id),n=document.getElementById(a.ContentContainerId),l=document.getElementById(a.ContainerId);"Left"==a.Direction?(t.style.float="left",t.style.height=a.Length,t.style.width=a.Width,t.style.bottom=a.PBottom,t.style.right=a.PRight,t.style.marginBottom=a.PMarginOne,t.style.marginTop=a.PMarginTwo):"Right"==a.Direction?(t.style.float="right",t.style.height=a.Length,t.style.width=a.Width,t.style.bottom=a.PBottom,t.style.right=a.PRight,t.style.marginBottom=a.PMarginOne,t.style.marginTop=a.PMarginTwo):("Top"==a.Direction||"Bottom"==a.Direction)&&(t.style.float="left",t.style.width=a.Length,t.style.height=a.Width,t.style.bottom=a.PBottom,t.style.right=a.PRight,t.style.marginLeft=a.PMarginOne,t.style.marginRight=a.PMarginTwo);const i=e("0%");var o;const d=new ResizeObserver((e=>{e.forEach((e=>{const d=e.target;if(d.id==a.ContentContainerId){const e=l;var u=d.scrollHeight,c=d.scrollWidth,s=e.clientHeight,m=e.clientWidth}if(d.id==a.ContainerId){const e=n;u=e.scrollHeight,c=e.scrollWidth,s=d.clientHeight,m=d.clientWidth}var g,y;"Left"==a.Direction||"Right"==a.Direction?(g=u,y=s):("Top"==a.Direction||"Bottom"==a.Direction)&&(g=c,y=m),r.value=g<=y;var p=y/g*100;if(g>y){var f,h=t.childNodes[0];"Left"==a.Direction||"Right"==a.Direction?(h.style.width="100%",h.style.height=p.toString()+"%",f=l.scrollTop/n.scrollHeight*100,h.style.top=f.toString()+"%"):("Top"==a.Direction||"Bottom"==a.Direction)&&(h.style.width=p.toString()+"%",h.style.height="100%",f=l.scrollLeft/n.scrollWidth*100,h.style.left=f.toString()+"%"),i.value=f,"Left"==a.Direction||"Right"==a.Direction?o=t.offsetHeight-h.offsetHeight:("Top"==a.Direction||"Bottom"==a.Direction)&&(o=t.offsetWidth-h.offsetWidth)}}))}));d.observe(l),d.observe(n);var s,m,g,y,p,f=t.childNodes[0],h=!0;f.addEventListener("mousedown",(function(e){"Left"==a.Direction||"Right"==a.Direction?(s=e.clientY,m=this.offsetTop):("Top"==a.Direction||"Bottom"==a.Direction)&&(s=e.clientX,m=this.offsetLeft),h=!1,function(){function e(e){h||(e.preventDefault(),u.value=!0,c({type:"null"}),"Left"==a.Direction||"Right"==a.Direction?g=e.clientY-s+m:("Top"==a.Direction||"Bottom"==a.Direction)&&(g=e.clientX-s+m),g>=o&&(g=o),g<=0&&(g=0),"Left"==a.Direction||"Right"==a.Direction?(f.style.top=g+"px",y=g/t.offsetHeight,p=n.scrollHeight*y,l.scrollTop=p):("Top"==a.Direction||"Bottom"==a.Direction)&&(f.style.left=g+"px",y=g/t.offsetWidth,p=n.scrollWidth*y,l.scrollLeft=p))}document.addEventListener("mouseup",(function(t){u.value=!1,c({type:"null"}),document.removeEventListener("mousemove",e),h=!0}),{once:!0}),document.addEventListener("mousemove",e)}()}));var v=null;l.addEventListener("scroll",(function(e){var t;u.value=!0,c({type:"null"}),"Left"==a.Direction||"Right"==a.Direction?(t=l.scrollTop/n.scrollHeight*100,f.style.top=t.toString()+"%"):("Top"==a.Direction||"Bottom"==a.Direction)&&(t=l.scrollLeft/n.scrollWidth*100,f.style.left=t.toString()+"%"),h&&(clearTimeout(v),v=setTimeout((function(){u.value=!1,c({type:"null"})}),200))}))})),(e,t)=>(i(),l("div",{class:"ImScrollBarTrack",id:a.Id,onMouseover:c,onMouseout:c},T,40,E))}},w=["id"],b=["name"],A={__name:"MdCard",props:{id:String,icon:String,Background:String,TextColor:String,Width:String,Height:String,Other:Object},setup(t){const n=t,u=e({});return u.value={background:n.Background,width:n.Width,height:n.Height,...n.Other},(e,c)=>(i(),l("mdui-card",{id:t.id,class:"baseCard",variant:"filled",style:d(u.value)},[n.icon?(i(),l("mdui-icon",{key:0,class:"cardIcon",name:n.icon,style:{"font-size":"140px"}},null,8,b)):a("",!0),o("div",{class:"cardContent",style:d({color:n.TextColor,"z-index":5})},[r(e.$slots,"default")],4)],12,w))}},P=o("div",{id:"MagicBadge",style:{}},[o("span",{style:{"font-size":"3rem","font-weight":"bold",margin:"10px 10px 10px 20px",height:"fit-content",width:"fit-content"}},"魔曰"),o("span",{style:{"font-size":"1rem","font-variant":"petite-caps","margin-left":"20px",height:"fit-content",width:"fit-content"}},"Abracadabra")],-1),R={id:"MainContainer",style:{display:"grid","grid-template-rows":"80px 150px 80px","grid-gap":"7px"}},D={key:0,id:"InputCard",variant:"outlined",rows:"2",label:"话语",placeholder:"你渴求吟唱的话语",style:{"grid-area":"1",height:"80px",width:"360px"}},O=o("h1",{style:{"align-self":"center","justify-self":"center"}},"选择文件",-1),S=o("p",{style:{"align-self":"center","justify-self":"center"}},"拖拽或点击",-1),N={style:{"align-self":"center","justify-self":"center","margin-bottom":"0"}},_=o("mdui-text-field",{id:"KeyCard",variant:"outlined",rows:"1",label:"魔咒",placeholder:"将一切雪藏的魔咒",style:{"grid-column":"span 3","align-self":"center",width:"360px"}},null,-1),L=o("mdui-slider",{id:"Randomness",step:"25",value:"50",min:"0",max:"100",style:{background:"#0000003b",padding:"0 25px",width:"215px","margin-left":"5px","border-radius":"25px",height:"35px"}},null,-1),F={key:2,id:"OutputText",variant:"outlined",rows:"4",label:"符文",placeholder:"回路末端的符文",style:{"grid-area":"3",height:"120px",width:"360px"}},U=o("h1",{style:{"align-self":"center","justify-self":"center"}},"输出文件",-1),M={id:"CopyrightBadger",style:{"grid-area":"4",display:"grid","grid-template-columns":"50% 50%"}},j=o("p",{style:{position:"relative",width:"fit-content",height:"fit-content",top:"60px","font-size":"1rem","font-variant":"petite-caps","text-align":"left",padding:"6px","border-radius":"inherit",margin:"0px"}},[f(" Abracadabra V3.3.1"),o("br"),o("a",{href:"https://github.com/SheepChef/Abracadabra"},"Github Repo")],-1),W={id:"CryptControl"},K={key:0,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},q={key:2,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},H={key:4,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},$={key:6,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},z={key:8,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},Y={key:10,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},X={key:12,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},V={key:14,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},G={id:"MainContainer"},J=o("p",{style:{position:"relative",width:"fit-content",height:"fit-content",top:"0px","font-size":"1rem","font-variant":"petite-caps","text-align":"left",padding:"6px","border-radius":"inherit",margin:"0px"}}," Advanced Encryption ",-1),Q={id:"AdvancedEncSwitchContainer",style:{width:"216px",display:"grid","grid-template-columns":"25% 25% 25% 25% 25% 25% 25% 25%",scale:"0.82","column-gap":"2px","margin-top":"0px","align-content":"center","font-size":"13px","margin-left":"-20px"}},Z={key:0,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},ee={key:2,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},te={key:4,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},ne={key:6,style:{"align-self":"center","justify-self":"right","margin-right":"0px"}},le={key:0,id:"TOTPTimeStep",step:"1",value:"4",min:"0",max:"15",style:{background:"#0000003b",padding:"0 15px",width:"215px","margin-left":"12px","border-radius":"25px",height:"35px"}},ie={key:1,style:{position:"relative",width:"fit-content",height:"fit-content",top:"0px","font-size":"0.9rem","font-variant":"petite-caps","text-align":"left",padding:"6px","border-radius":"inherit",margin:"19px"}},oe=[o("span",{id:"TOTPExpiryPrefix"},"Expires in ",-1),o("span",{id:"TOTPExpiry"},"NaN",-1)],ae=["label"],re={key:3,id:"TOTPBasekey",variant:"outlined",rows:"1",label:"TOTP Basekey",placeholder:"留空为加密密钥",style:{"grid-column":"span 3","align-self":"center",width:"100%",scale:"0.7"}},de={id:"MainContainer"},ue=o("p",{style:{position:"relative",width:"fit-content",height:"fit-content",top:"0px","font-size":"1rem","font-variant":"petite-caps","text-align":"left",padding:"6px","border-radius":"inherit",margin:"0px"}}," Geek Inspector ",-1),ce={rounded:""},se={slot:"description",class:"small"},me=o("br",null,null,-1),ge=o("br",null,null,-1),ye=o("br",null,null,-1),pe=o("br",null,null,-1),fe=o("br",null,null,-1),he=o("br",null,null,-1),ve={rounded:""},Ie={slot:"description",class:"small"},xe=o("div",{id:"PositionOccupie"},null,-1),Be=o("mdui-snackbar",{"auto-close-delay":"1500",id:"InfoBar"},null,-1),Ce={__name:"HomeView",setup(t){const r=e("TEXT"),d=e("TEXT"),x=e("Next"),B=e(!0),E=e(!1),T=e(!1),k=e(!1),w=e(!1),b=e(!1),Ce=e(!1),Ee=e(!1),Te=e(!1),ke=e(!1),we=e(["No Data Available"]),be=e("NONE"),Ae=e("None"),Pe=e(!1),Re=e(!1),De=e(!1),Oe=e(!1),Se=e(0),Ne=e(0);e("#5b6169");var _e=e(new Array);const Le=e(null),Fe=e("");function Ue(e){let t=document.getElementById("InfoBar"),n=e.message;t.innerText=n,t.open=!0}function Me(e){return new Promise(((t,n)=>{const l=new FileReader;l.onload=e=>{const n=new Uint8Array(e.target.result);t(n)},l.onerror=n,l.readAsArrayBuffer(e)}))}function je(e,t,n){const l=new Blob([e],{type:n});return new File([l],t,{type:n})}function We(e){e.preventDefault(),document.getElementById("FileCard").style.background="#6ea0be"}function Ke(e){e.preventDefault(),document.getElementById("FileCard").style.background="#5b6169"}function qe(e){e.preventDefault()}function He(e){e.preventDefault(),document.getElementById("FileCard").style.background="#5b6169",Ye(e.dataTransfer.files)}function $e(e){Ye(e.target.files)}function ze(e){document.querySelector("#fileIn").click()}function Ye(e){_e.value=[];for(let t=0;t<e.length;t++){const n=e[t];_e.value.push(n)}}function Xe(){"Next"==x.value?(1==document.getElementById("ForcePian").checked?(document.getElementById("ForceLogi").disabled=!0,document.getElementById("ForceLogi").checked=!1,b.value=!0,Ce.value=!1):1==document.getElementById("ForceLogi").checked?(document.getElementById("ForcePian").disabled=!0,document.getElementById("ForcePian").checked=!1,b.value=!1,Ce.value=!0):(document.getElementById("ForcePian").disabled=!1,document.getElementById("ForceLogi").disabled=!1,Ce.value=!1,b.value=!1),Ve(),Je(),Qe()):1==document.getElementById("ForceEnc").checked?(document.getElementById("ForceDec").disabled=!0,document.getElementById("ForceDec").checked=!1,T.value=!0,k.value=!1):1==document.getElementById("ForceDec").checked?(document.getElementById("ForceEnc").disabled=!0,document.getElementById("Forceq").disabled=!0,document.getElementById("ForceEnc").checked=!1,T.value=!1,k.value=!0):(document.getElementById("ForceDec").disabled=!1,document.getElementById("ForceEnc").disabled=!1,document.getElementById("Forceq").disabled=!1,T.value=!1,k.value=!1)}async function Ve(){if(1==document.getElementById("AdvancedEnc").checked?E.value=!0:(E.value=!1,Re.value=!1,De.value=!1,Oe.value=!1),E.value){await v(),"Next"==x.value&&(0==document.getElementById("UsePBKDF2").checked?(document.getElementById("UseTOTP").disabled=!0,document.getElementById("UseTOTP").checked=!1,Re.value=!1,Oe.value=!1):1==document.getElementById("UsePBKDF2").checked&&(document.getElementById("UseTOTP").disabled=!1,Re.value=!0));try{if(1==document.getElementById("UseStrongIV").checked?Pe.value=!0:Pe.value=!1,1==document.getElementById("UseHMAC").checked?De.value=!0:De.value=!1,1==document.getElementById("UsePBKDF2").checked?Re.value=!0:Re.value=!1,1==document.getElementById("UseTOTP").checked){Oe.value=!0,await v(),document.querySelector("#TOTPTimeStep").labelFormatter=e=>0==e?"3分钟":1==e?"5分钟":2==e?"10分钟":3==e?"30分钟":4==e?"2小时":5==e?"6小时":6==e?"12小时":7==e?"1天":8==e?"3天":9==e?"5天":10==e?"1周":11==e?"3周":12==e?"1个月":13==e?"2个月":14==e?"6个月":15==e?"1年":"";var e=setInterval((function(){try{""==document.getElementById("TOTPEpoch").value?Se.value=Date.now():Se.value=parseInt(document.getElementById("TOTPEpoch").value);let e=function(e,t,n,l={}){if("number"!=typeof e||"number"!=typeof t||t<=0)throw new TypeError("genEpoch 和 timestep 必须为数字，且 timestep > 0");const i={compact:!0,maxUnits:3,useExactMonths:!1,...l},o=e/1e3,a=Math.floor(Date.now()/1e3),r=Math.floor(o/t),d=Math.floor(a/t),u=(r+1)*t;let c=u-a;if(c<=0)return 0;if(r>d)return-1;if(i.useExactMonths)return formatUsingCalendarDifference(a,u,i);const s=3600,m=86400,g=2419200,y=31536e3,p={};p.years=Math.floor(c/y),c-=p.years*y,p.months=Math.floor(c/g),c-=p.months*g,p.days=Math.floor(c/m),c-=p.days*m,p.hours=Math.floor(c/s),c-=p.hours*s,p.minutes=Math.floor(c/60),c-=60*p.minutes,p.seconds=c;const f=[["year","y"],["months","mo"],["days","d"],["hours","h"],["minutes","m"],["seconds","s"]],h=e=>String(e).padStart(2,"0");if(p.years*y+p.months*g+p.days*m+p.hours*s+60*p.minutes+p.seconds<m)return`${h(p.hours)}:${h(p.minutes)}:${h(p.seconds)}`;const v=[];for(const[C,E]of f.slice(0,3)){const e=p[C];e&&v.length<i.maxUnits&&v.push(i.compact?`${e}${E}`:`${e} ${E.replace("mo","months").replace("y","years").replace("d","days")}`)}0===v.length&&p.days>0&&v.push(i.compact?`${p.days}d`:`${p.days} days`);const I=`${h(p.hours)}:${h(p.minutes)}:${h(p.seconds)}`,x=(i.compact," "),B=v.join(x);return B?`${B} ${I}`:I}(Se.value,function(e){let t=0;switch(parseInt(document.getElementById("TOTPTimeStep").value)){case 0:t=180;break;case 1:t=300;break;case 2:t=600;break;case 3:t=1800;break;case 4:t=7200;break;case 5:t=21600;break;case 6:t=43200;break;case 7:t=86400;break;case 8:t=259200;break;case 9:t=432e3;break;case 10:t=604800;break;case 11:t=1814400;break;case 12:t=2419200;break;case 13:t=4838400;break;case 14:t=14515200;break;case 15:t=31557600}return t}());"0"==e?(document.getElementById("TOTPExpiryPrefix").innerText="Already Expired",document.getElementById("TOTPExpiry").innerText=""):"-1"==e?(document.getElementById("TOTPExpiryPrefix").innerText="Not Yet Effective",document.getElementById("TOTPExpiry").innerText=""):(document.getElementById("TOTPExpiryPrefix").innerText="Expires in ",document.getElementById("TOTPExpiry").innerText=e)}catch(t){return void clearInterval(e)}}),100)}else Oe.value=!1}catch(t){return Pe.value=!1,De.value=!1,Re.value=!1,void(Oe.value=!1)}}else try{clearInterval(e)}catch(t){return}}function Ge(){1==document.getElementById("Forceq").checked?w.value=!0:w.value=!1}function Je(){1==document.getElementById("ForceNoMark").checked?Ee.value=!0:Ee.value=!1}function Qe(){1==document.getElementById("ForceTraditional").checked?Te.value=!0:Te.value=!1}async function Ze(){"Normal"==x.value?(document.getElementById("NormalControlBar").style.display="none",document.getElementById("NextControlBar").style.display="grid",x.value="Next"):"Next"==x.value&&(document.getElementById("NormalControlBar").style.display="block",document.getElementById("NextControlBar").style.display="none",x.value="Normal"),ke.value=!1,await v(),Xe()}async function et(){let e,t=new C(r.value,d.value);try{if("TEXT"==r.value){if(""==document.getElementById("InputCard").value)return;""==document.getElementById("KeyCard").value?(e="ABRACADABRA",Ue({message:"你没有填写魔咒，自动使用默认魔咒，这不安全",autoCloseDelay:1500}),document.getElementById("KeyCard").value="ABRACADABRA"):e=document.getElementById("KeyCard").value,T.value?w.value?t.OldInput(document.getElementById("InputCard").value,"ENCRYPT",e,!0):t.OldInput(document.getElementById("InputCard").value,"ENCRYPT",e,!1):k.value?t.OldInput(document.getElementById("InputCard").value,"DECRYPT",e):t.OldInput(document.getElementById("InputCard").value,"AUTO",e,w.value)}else if("UINT8"==r.value){if(null==window.inputfile||null==window.inputfile)return;""==document.getElementById("KeyCard").value?(e="ABRACADABRA",Ue({message:"你没有填写魔咒，自动使用默认魔咒，这不安全",autoCloseDelay:1500}),document.getElementById("KeyCard").value="ABRACADABRA"):e=document.getElementById("KeyCard").value;let n=await Me(window.inputfile);T.value?w.value?t.OldInput(n,"ENCRYPT",e,!0):t.OldInput(n,"ENCRYPT",e,!1):k.value?t.OldInput(n,"DECRYPT",e):t.OldInput(n,"AUTO",e,w.value)}if("TEXT"==d.value)document.getElementById("OutputText").value=t.Output();else if("UINT8"==d.value){let e=je(t.Output(),"Abracadabra_Result","application/octet-stream"),n=document.createElement("a");n.download=e.name;let l=URL.createObjectURL(e);n.href=l,n.click(),URL.revokeObjectURL(l)}}catch(n){Ue({message:"发生错误, "+n.toString()})}}async function tt(){Ne.value++;let e,t=new C(r.value,d.value);try{if("TEXT"==r.value){if(""==document.getElementById("InputCard").value)return;""==document.getElementById("KeyCard").value?(e="ABRACADABRA",Ue({message:"你没有填写魔咒，自动使用默认魔咒，这不安全",autoCloseDelay:1500}),document.getElementById("KeyCard").value="ABRACADABRA"):e=document.getElementById("KeyCard").value,"ABRACADABRA"==e&&(E.value&&"true"!=function(e){for(var t="AdvancedEncWeakPasswordIgnore=",n=document.cookie.split(";"),l=0;l<n.length;l++){var i=n[l].trim();if(0==i.indexOf(t))return i.substring(30,i.length)}return""}()?I({headline:"弱密码",description:"您正尝试使用默认密钥执行高级加密，这将导致高级加密失去意义。在使用高级加密时，强烈建议您使用一个足够强的加密密钥。",icon:"gpp_maybe--rounded",actions:[{text:"不再提示",onClick:()=>(document.cookie="AdvancedEncWeakPasswordIgnore=true",!0)}]}):Ue({message:"正在使用默认密钥，这可简化解密流程，但不安全。",autoCloseDelay:1500})),await new Promise((n=>{t.WenyanInput(document.getElementById("InputCard").value,"ENCRYPT",e,{PunctuationMark:!Ee.value,RandomIndex:parseInt(document.querySelector("#Randomness").value),PianwenMode:b.value,LogicMode:Ce.value,Traditional:Te.value},{Enable:E.value,UseStrongIV:Pe.value,UseHMAC:De.value,UsePBKDF2:Re.value,UseTOTP:Oe.value,TOTPTimeStep:parseInt(Oe.value?document.getElementById("TOTPTimeStep").value:4),TOTPBaseKey:Oe.value?""==document.getElementById("TOTPBasekey").value?e:document.getElementById("TOTPBasekey").value:void 0,TOTPEpoch:Se.value},!0===ke.value?ot:null),n()})).finally((()=>{!0===ke.value&&(setInterval((()=>{document.getElementById("ImContentContainer").style.height="100.1%"}),it+50),setInterval((()=>{document.getElementById("ImContentContainer").style.height="100%"}),it+100),it=50)}))}else if("UINT8"==r.value){if(null==window.inputfile||null==window.inputfile)return;""==document.getElementById("KeyCard").value?(e="ABRACADABRA",Ue({message:"你没有填写魔咒，自动使用默认魔咒，这不安全",autoCloseDelay:1500}),document.getElementById("KeyCard").value="ABRACADABRA"):e=document.getElementById("KeyCard").value;let n=await Me(window.inputfile);t.WenyanInput(n,"ENCRYPT",e,{PunctuationMark:!Ee.value,RandomIndex:parseInt(document.querySelector("#Randomness").value),PianwenMode:b.value,LogicMode:Ce.value,Traditional:Te.value})}if("TEXT"==d.value)document.getElementById("OutputText").value=t.Output();else if("UINT8"==d.value){let e=je(t.Output(),"Abracadabra_Result","application/octet-stream"),n=document.createElement("a");n.download=e.name;let l=URL.createObjectURL(e);n.href=l,n.click(),URL.revokeObjectURL(l)}}catch(n){Ue({message:"发生错误, "+n.toString()})}}async function nt(){Ne.value++;let e,t=new C(r.value,d.value);try{if("TEXT"==r.value){if(""==document.getElementById("InputCard").value)return;""==document.getElementById("KeyCard").value?(e="ABRACADABRA",Ue({message:"你没有填写魔咒，自动使用默认魔咒，这不安全",autoCloseDelay:1500}),document.getElementById("KeyCard").value="ABRACADABRA"):e=document.getElementById("KeyCard").value,await new Promise((n=>{t.WenyanInput(document.getElementById("InputCard").value,"DECRYPT",e,null,E.value?{TOTPBaseKey:Oe.value?""==document.getElementById("TOTPBasekey").value?e:document.getElementById("TOTPBasekey").value:void 0,TOTPEpoch:Oe.value?Se.value:Date.now()}:void 0,!0===ke.value?ot:null),n()})).finally((()=>{!0===ke.value&&(setInterval((()=>{document.getElementById("ImContentContainer").style.height="100.1%"}),it+50),setInterval((()=>{document.getElementById("ImContentContainer").style.height="100%"}),it+100),it=50)}))}else if("UINT8"==r.value){if(null==window.inputfile||null==window.inputfile)return;""==document.getElementById("KeyCard").value?(e="ABRACADABRA",Ue({message:"你没有填写魔咒，自动使用默认魔咒，这不安全",autoCloseDelay:1500}),document.getElementById("KeyCard").value="ABRACADABRA"):e=document.getElementById("KeyCard").value;let n=await Me(window.inputfile);t.WenyanInput(n,"DECRYPT",e)}if("TEXT"==d.value)document.getElementById("OutputText").value=t.Output();else if("UINT8"==d.value){let e=je(t.Output(),"Abracadabra_Result","application/octet-stream"),n=document.createElement("a");n.download=e.name;let l=URL.createObjectURL(e);n.href=l,n.click(),URL.revokeObjectURL(l)}}catch(n){Ue({message:"发生错误, "+n.toString()})}}function lt(){""!=document.getElementById("OutputText").value&&(document.getElementById("OutputText").select(),navigator.clipboard.writeText(window.getSelection().toString()))}u((()=>_e.value[0]),(e=>{Le.value=e,Fe.value=e.name,window.inputfile=e})),u(ke,(()=>{setTimeout((()=>{document.getElementById("ImWindowContainer").style.height="100.1%",setTimeout((()=>{document.getElementById("ImWindowContainer").style.height="100%"}),500)}),1e3)})),u(E,(()=>{setTimeout((()=>{document.getElementById("ImWindowContainer").style.height="100.1%",setTimeout((()=>{document.getElementById("ImWindowContainer").style.height="100%"}),500)}),1e3)}));var it=50;function ot(e){it+=50;let t=Ne.value;setTimeout((()=>{let n=Ne.value;t==n&&("ROUNDS"==e.Type?we.value=e.Value:(be.value=e.Type,Ae.value=e.Value))}),it)}async function at(){window.deferredPrompt&&(window.deferredPrompt.prompt(),"accepted"===(await window.deferredPrompt.userChoice).outcome?Ue({message:"感谢你选择魔曰"}):console.log("PWA Install cancelled"))}var rt,dt=0;return n((()=>{var e;(["fullscreen","standalone","minimal-ui"].some((e=>window.matchMedia("(display-mode: "+e+")").matches))||(null==(e=window.navigator)?void 0:e.standalone)||document.referrer.includes("android-app://"))&&(B.value=!1),Xe(),document.querySelector("#Randomness").labelFormatter=e=>0==e?"长句优先":25==e?"稍随机":50==e?"适中":75==e?"较随机":100==e?"完全随机":"",u(ke,(()=>{document.getElementById("ImContentContainer").style.height="100.1%",document.getElementById("ImContentContainer").style.height="100%"}))})),c((()=>{})),(e,t)=>(i(),l(h,null,[P,s(A,{id:"FunctionCard"},{default:g((()=>[o("div",R,["TEXT"==r.value?(i(),l("mdui-text-field",D)):a("",!0),"UINT8"==r.value?(i(),m(A,{key:1,id:"FileCard",Background:"#5b6169",Width:"360px",Height:"80px",Other:{"grid-area":1,transition:"all 1s ease"},clickable:"",onDragenter:We,onDragleave:Ke,onDragover:qe,onDrop:He,onClick:ze},{default:g((()=>[O,S,o("p",N,y(Fe.value),1),o("input",{type:"file",id:"fileIn",style:{display:"contents"},onChange:$e},null,32)])),_:1})):a("",!0),o("div",{id:"controlBar",style:{"grid-area":"2",display:"grid","grid-template-columns":"360px"}},[_,o("div",{id:"NormalControlBar",style:{"align-self":"center",display:"none"}},[o("mdui-button",{icon:"arrow_downward--rounded",onClick:et,style:{"align-self":"center",top:"-4px",width:"230px","margin-right":"6px"}},"吟唱你的魔法"),o("mdui-button",{variant:"elevated",icon:"auto_awesome--rounded",onClick:Ze,style:{"align-self":"center",top:"-4px",width:"120px",border:"solid 2px white"}},"文言仿真")]),o("div",{id:"NextControlBar",style:{"align-self":"center",display:"grid","grid-template-columns":"235px 124px"}},[o("mdui-button",{icon:"arrow_downward--rounded",onClick:et,style:{"align-self":"center",top:"-4px",width:"230px","margin-right":"6px",display:"none"}},"吟唱你的魔法"),o("div",{style:{display:"grid","grid-template-rows":"40px 33px"}},[o("div",{style:{width:"fit-content","align-self":"center","justify-self":"center","margin-left":"-10px"}},[o("mdui-chip",{icon:"keyboard_double_arrow_down--rounded",onClick:tt,style:{"align-self":"center",width:"105px","text-align":"center","margin-right":"5px"}},"加密"),o("mdui-chip",{icon:"keyboard_double_arrow_down--rounded",onClick:nt,style:{"align-self":"center",width:"105px","text-align":"center"}},"解密")]),L]),o("mdui-button",{variant:"elevated",icon:"auto_fix_off--rounded",onClick:Ze,style:{"align-self":"center",top:"-4px",width:"120px",border:"solid 2px white"}},"传统加密")])]),"TEXT"==d.value?(i(),l("mdui-text-field",F)):a("",!0),o("mdui-button-icon",{icon:"content_copy--rounded",style:{position:"absolute",bottom:"103px",right:"22px",background:"rgb(11 11 11 / 25%)","backdrop-filter":"blur(2px)"},onClick:lt}),"UINT8"==d.value?(i(),m(A,{key:3,id:"FileCard2",Background:"#5b6169",Width:"360px",Height:"120px",Other:{"grid-area":3,transition:"all 1s ease"}},{default:g((()=>[U])),_:1})):a("",!0),o("div",M,[j,B.value?(i(),l("mdui-chip",{key:0,elevated:"",icon:"file_download--rounded",style:{position:"absolute",bottom:"40px",right:"15px",background:"rgba(11, 11, 11, 0.25)","backdrop-filter":"blur(2px)"},onClick:at},"安装应用")):a("",!0),o("p",{id:"CopyRightSheepChef",onClick:t[0]||(t[0]=e=>{ke.value?Ue({message:"ヾ(≧▽≦*)o 感谢您使用魔曰加密。"}):"0"==document.querySelector("#CopyRightSheepChef").getAttribute("count")?(rt=setInterval((function(){if(dt==parseInt(document.querySelector("#CopyRightSheepChef").getAttribute("count"))&&0!=dt)return dt=0,document.querySelector("#CopyRightSheepChef").setAttribute("count","0"),void clearInterval(rt);dt=parseInt(document.querySelector("#CopyRightSheepChef").getAttribute("count"))}),1e3),dt=parseInt(document.querySelector("#CopyRightSheepChef").getAttribute("count")),document.querySelector("#CopyRightSheepChef").setAttribute("count","1")):(document.querySelector("#CopyRightSheepChef").setAttribute("count",(parseInt(document.querySelector("#CopyRightSheepChef").getAttribute("count"))+1).toString()),3==parseInt(document.querySelector("#CopyRightSheepChef").getAttribute("count"))&&Ue({message:"ヾ(≧▽≦*)o 多点几次！"}),10==parseInt(document.querySelector("#CopyRightSheepChef").getAttribute("count"))&&(Ue({message:"极客佐料已激活"}),ke.value=!0))}),count:"0",style:{position:"relative",width:"fit-content",height:"fit-content",top:"98px","font-size":"1rem","font-variant":"petite-caps","text-align":"left",padding:"0px","border-radius":"inherit",margin:"0px",right:"4px","justify-self":"end",opacity:"0.5",cursor:"pointer","user-select":"none"}}," SheepChef © ")])])])),_:1}),s(A,{id:"FloatCard",class:p({oldfloat:"Normal"==x.value})},{default:g((()=>[o("div",W,["Next"==x.value?(i(),l("span",K,"高级加密")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:1,id:"AdvancedEnc",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"lock_open--rounded","checked-icon":"lock--rounded",onChange:Ve},null,32)):a("",!0),"Next"==x.value?(i(),l("span",q,"骈文格律")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:3,id:"ForcePian",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"hdr_auto--rounded","checked-icon":"auto_awesome--rounded",onChange:Xe},null,32)):a("",!0),"Next"==x.value?(i(),l("span",H,"逻辑优先")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:5,id:"ForceLogi",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"hdr_auto--rounded","checked-icon":"auto_awesome--rounded",onChange:Xe},null,32)):a("",!0),"Next"==x.value?(i(),l("span",$,"去除标点")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:7,id:"ForceNoMark","checked-icon":"auto_awesome--rounded",style:{"align-self":"center","justify-self":"left"},onChange:Je},null,32)):a("",!0),"Next"==x.value?(i(),l("span",z,"繁體中文")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:9,id:"ForceTraditional","checked-icon":"translate--rounded",style:{"align-self":"center","justify-self":"left"},onChange:Qe},null,32)):a("",!0),"Normal"==x.value?(i(),l("span",Y,"雪藏话语")):a("",!0),"Normal"==x.value?(i(),l("mdui-switch",{key:11,id:"ForceEnc",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"hdr_auto--rounded","checked-icon":"auto_awesome--rounded",onChange:Xe},null,32)):a("",!0),"Normal"==x.value?(i(),l("span",X,"探求真意")):a("",!0),"Normal"==x.value?(i(),l("mdui-switch",{key:13,id:"ForceDec",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"hdr_auto--rounded","checked-icon":"auto_awesome--rounded",onChange:Xe},null,32)):a("",!0),"Normal"==x.value?(i(),l("span",V,"去除标志")):a("",!0),"Normal"==x.value?(i(),l("mdui-switch",{key:15,id:"Forceq","checked-icon":"auto_awesome--rounded",style:{"align-self":"center","justify-self":"left"},onChange:Ge},null,32)):a("",!0)])])),_:1},8,["class"]),E.value&&"Next"==x.value?(i(),m(A,{key:0,id:"AdvancedEncCard"},{default:g((()=>[o("div",G,[J,o("div",Q,["Next"==x.value?(i(),l("span",Z,"完整IV")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:1,id:"UseStrongIV",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"lock_open--rounded","checked-icon":"lock--rounded",onChange:Ve},null,32)):a("",!0),"Next"==x.value?(i(),l("span",ee,"HMAC")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:3,id:"UseHMAC",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"lock_open--rounded","checked-icon":"lock--rounded",onChange:Ve},null,32)):a("",!0),"Next"==x.value?(i(),l("span",te,"KDF")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:5,id:"UsePBKDF2",style:{"align-self":"center","justify-self":"left"},"unchecked-icon":"lock_open--rounded","checked-icon":"lock--rounded",onChange:Ve},null,32)):a("",!0),"Next"==x.value?(i(),l("span",ne,"TOTP")):a("",!0),"Next"==x.value?(i(),l("mdui-switch",{key:7,id:"UseTOTP","unchecked-icon":"lock_open--rounded","checked-icon":"lock_clock--rounded",style:{"align-self":"center","justify-self":"left"},onChange:Ve},null,32)):a("",!0)]),Oe.value?(i(),l("mdui-slider",le)):a("",!0),Oe.value?(i(),l("span",ie,oe)):a("",!0),Oe.value?(i(),l("mdui-text-field",{key:2,id:"TOTPEpoch",type:"number",variant:"outlined",rows:"1",label:"TOTP Epoch "+Se.value,placeholder:"留空为现在时间戳",style:{"grid-column":"span 3","align-self":"center",width:"100%",scale:"0.7"}},null,8,ae)):a("",!0),Oe.value?(i(),l("mdui-text-field",re)):a("",!0)])])),_:1})):a("",!0),ke.value?(i(),m(A,{key:1,id:"GeekCard"},{default:g((()=>[o("div",de,[ue,o("mdui-button-icon",{icon:"close--rounded",style:{position:"absolute",top:"10px",right:"10px",background:"rgb(11 11 11 / 25%)","backdrop-filter":"blur(2px)","z-index":"1000",zoom:"82%"},onClick:t[1]||(t[1]=e=>ke.value=!1)}),o("mdui-list",null,[o("mdui-list-item",ce,[f(" 密钥轮 "),o("span",se,[f(y(we.value[0]),1),me,f(" "+y(we.value[1]),1),ge,f(" "+y(we.value[2]),1),ye,f(" "+y(we.value[3]),1),pe,f(" "+y(we.value[4]),1),fe,f(" "+y(we.value[5]),1),he])]),o("mdui-list-item",ve,[f(" 步骤 - "+y(be.value)+" ",1),o("span",Ie,y(Ae.value),1)])])])])),_:1})):a("",!0),xe,Be],64))}},Ee={id:"ImWindowContainer",ref:"ImContainer"},Te={id:"ImContentContainer"},ke={id:"main_content",style:{height:"fit-content"}},we={__name:"ImMainView",setup(t){const a=e(0),r=new ResizeObserver((e=>{e.forEach((e=>{a.value=e.contentRect.height}))}));return n((()=>{r.observe(document.getElementById("ImWindowContainer"))})),(e,t)=>(i(),l("div",Ee,[s(k,{ContainerId:"ImWindowContainer",ContentContainerId:"ImContentContainer",Direction:"Right",Length:"calc(100% - 120px)",Width:"10px",PBottom:"10px",PRight:"2px",PMarginOne:"27px",PMarginTwo:"0px",Id:"TestBar"}),o("div",Te,[o("div",ke,[s(Ce)])])],512))}},be=o("header",null,[o("link",{rel:"shortcut icon",href:"favicon.ico"})],-1),Ae={style:{width:"100% !important",height:"100%"}},Pe={class:"InnerUI",fullHeight:""},Re={__name:"App",setup:e=>(n((()=>{})),(e,t)=>(i(),l(h,null,[be,o("mdui-layout",Ae,[o("mdui-layout-main",Pe,[s(we)])])],64)))};window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),window.deferredPrompt=e}));const De=x(Re);B("#09355b"),De.component("Card",A),De.mount("body");
